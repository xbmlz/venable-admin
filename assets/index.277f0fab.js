import{a as z,b as J,_ as w,u as re,c as de,l as ee,d as q,D as _e,R as pe,r as fe}from"./index.8d94343a.js";/* empty css              */import{d as A,aZ as he,a_ as be,z as b,aC as x,A as L,D as v,aR as H,a$ as te,b0 as ne,aE as e,a as M,c as g,b1 as ve,b2 as ae,aD as l,u as h,aS as U,aI as ge,aP as me,b3 as ye,b4 as Fe,b5 as se,C as O,b6 as j,b7 as xe,aF as $,aV as ke,b8 as oe,aK as G,aL as Z,i as Ce,b9 as Ee,ba as Se,h as $e,bb as De,bc as Te,bd as we,be as Ae,B as Be,o as Me,bf as Le,bg as Ie,q as Re,bh as Ve,bi as Pe,bj as ze,bk as Ne,bl as Oe,bm as Q,bn as je,bo as Ue,bp as We,p as Ke}from"./arco.eb664111.js";import{g as He,h as Je,i as qe,j as Ge,e as ue,f as ce,k as Ze,l as Qe}from"./vue.b49bf95e.js";/* empty css              */function Xe(){return document.body.getBoundingClientRect().width-1<992}const Ye="/venable-admin/assets/logo.e70dcf41.png";const et=A({__name:"form-wrapper",props:{type:{type:String,default:""},name:{type:String,default:""},defaultValue:{type:[String,Boolean,Number],default:""}},emits:["inputChange"],setup(n,{emit:a}){const r=n,i=u=>{a("inputChange",{value:u,key:r.name})};return(u,_)=>{const c=he,m=be;return n.type==="number"?(b(),x(c,{key:0,style:{width:"80px"},size:"small","default-value":n.defaultValue,onChange:i},null,8,["default-value"])):(b(),x(m,{key:1,"default-checked":n.defaultValue,size:"small",onChange:i},null,8,["default-checked"]))}}}),tt={class:"block"},nt={class:"title"},at=A({__name:"block",props:{title:{type:String,default:""},options:{type:Array,default(){return[]}}},setup(n){const a=z(),r=J(),i=async({key:u,value:_})=>{u==="colorWeakness"&&(document.body.style.filter=_?"invert(80%)":"none"),u==="serverMenu"&&_&&await r.buildRoutes(),a.updateSettings({[u]:_})};return(u,_)=>(b(),L("div",tt,[v("h5",nt,H(n.title),1),(b(!0),L(te,null,ne(n.options,c=>(b(),L("div",{key:c.name,class:"switch-wrapper"},[v("span",null,H(c.name),1),e(et,{type:c.type||"switch",name:c.key,"default-value":c.defaultVal,onInputChange:i},null,8,["type","name","default-value"])]))),128))]))}});const X=w(at,[["__scopeId","data-v-adb09ea2"]]),st=U(" \u9875\u9762\u914D\u7F6E "),ot=U(' \u914D\u7F6E\u4E4B\u540E\u4EC5\u662F\u4E34\u65F6\u751F\u6548\uFF0C\u8981\u60F3\u771F\u6B63\u4F5C\u7528\u4E8E\u9879\u76EE\uFF0C\u70B9\u51FB\u4E0B\u65B9\u7684 "\u590D\u5236\u914D\u7F6E" \u6309\u94AE\uFF0C\u5C06\u914D\u7F6E\u66FF\u6362\u5230 settings.json \u4E2D\u5373\u53EF\u3002 '),ut=A({__name:"index",setup(n,{expose:a}){const r=M(!1),i=z(),{copy:u}=He(),_=g(()=>[{name:"\u4F7F\u7528\u670D\u52A1\u7AEF\u83DC\u5355",key:"serverMenu",defaultVal:i.serverMenu},{name:"\u9876\u680F\u9AD8\u5EA6",key:"navbarheight",defaultVal:i.navbarHeight,type:"number"},{name:"\u4FA7\u8FB9\u680F\u5BBD\u5EA6",key:"sidebarWidth",defaultVal:i.sidebarWidth,type:"number"},{name:"\u591A\u9875\u7B7E",key:"multiTabs",defaultVal:i.multiTabs}]),c=g(()=>[{name:"\u8272\u5F31\u6A21\u5F0F",key:"colorWeakness",defaultVal:i.colorWeakness}]),m=async()=>{const d=JSON.stringify(i.$state,null,2);await u(d),ge.success("\u590D\u5236\u6210\u529F")},F=()=>{r.value=!1};return a({visible:r}),(d,S)=>{const E=ve,D=ae;return b(),x(D,{width:350,"unmount-on-close":"",visible:r.value,"cancel-text":"\u5173\u95ED","ok-text":"\u590D\u5236\u914D\u7F6E",onCancel:F,onOk:m},{title:l(()=>[st]),default:l(()=>[e(X,{options:h(_),title:"\u5185\u5BB9\u533A\u57DF"},null,8,["options"]),e(X,{options:h(c),title:"\u5176\u4ED6\u8BBE\u7F6E"},null,8,["options"]),e(E,null,{default:l(()=>[ot]),_:1})]),_:1},8,["visible"])}}});const ct=w(ut,[["__scopeId","data-v-2c1cb585"]]),le=n=>(G("data-v-ffdecdf0"),n=n(),Z(),n),lt={class:"navbar"},it={class:"navbar-left"},rt=le(()=>v("img",{alt:"logo",src:Ye},null,-1)),dt=U(" VEnable "),_t={class:"navbar-right"},pt=["src"],ft=le(()=>v("span",null," \u9000\u51FA\u767B\u5F55 ",-1)),ht=A({__name:"index",setup(n){const a=z(),r=re(),i=Ce("toggleDrawerMenu"),u=g(()=>a.theme),_=Je({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(o){a.toggleTheme(o)}}),c=qe(_),m=()=>{c()},{isFullscreen:F,toggle:d}=Ge(),S=M(),E=()=>{S.value.visible=!0},D=g(()=>r.avatar),s=()=>{r.logout()};return(o,f)=>{const t=xe,p=$("icon-menu-fold"),k=me,C=$("icon-moon-fill"),y=$("icon-sun-fill"),T=ke,B=ye,R=$("icon-fullscreen-exit"),W=$("icon-fullscreen"),K=$("icon-settings"),V=Fe,N=$("icon-export"),P=oe,ie=se;return b(),L("div",lt,[v("div",it,[e(k,null,{default:l(()=>[rt,e(t,{style:O({marginTop:"0.8rem",fontSize:"18px"}),heading:5},{default:l(()=>[dt]),_:1},8,["style"]),h(a).isMobile?(b(),x(p,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:h(i)},null,8,["onClick"])):j("",!0)]),_:1})]),v("ul",_t,[v("li",null,[e(B,{content:h(u)==="light"?"\u70B9\u51FB\u5207\u6362\u4E3A\u6697\u9ED1\u6A21\u5F0F":"\u70B9\u51FB\u5207\u6362\u4E3A\u660E\u4EAE\u6A21\u5F0F"},{default:l(()=>[e(T,{class:"nav-btn",type:"outline",shape:"circle",onClick:m},{icon:l(()=>[h(u)==="dark"?(b(),x(C,{key:0})):(b(),x(y,{key:1}))]),_:1})]),_:1},8,["content"])]),v("li",null,[e(B,{content:h(F)?"\u70B9\u51FB\u9000\u51FA\u5168\u5C4F\u6A21\u5F0F":"\u70B9\u51FB\u5207\u6362\u5168\u5C4F\u6A21\u5F0F"},{default:l(()=>[e(T,{class:"nav-btn",type:"outline",shape:"circle",onClick:h(d)},{icon:l(()=>[h(F)?(b(),x(R,{key:0})):(b(),x(W,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),v("li",null,[e(B,{content:"\u9875\u9762\u914D\u7F6E"},{default:l(()=>[e(T,{class:"nav-btn",type:"outline",shape:"circle",onClick:E},{icon:l(()=>[e(K)]),_:1})]),_:1})]),v("li",null,[e(ie,{trigger:"click"},{content:l(()=>[e(P,null,{default:l(()=>[e(k,{onClick:s},{default:l(()=>[e(N),ft]),_:1})]),_:1})]),default:l(()=>[e(V,{size:28,style:{cursor:"pointer"}},{default:l(()=>[v("img",{alt:"avatar",src:h(D)},null,8,pt)]),_:1})]),_:1})])]),e(ct,{ref_key:"settingsRef",ref:S},null,512)])}}});const bt=w(ht,[["__scopeId","data-v-ffdecdf0"]]);const vt=(n,a)=>{const{target:r="_blank",...i}=a||{};window.open(n,r,Object.entries(i).reduce((u,_)=>{const[c,m]=_;return[...u,`${c}=${m}`]},[]).join(","))},gt=/^(?!mailto:)(?:http|https|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?:(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}\.(?:\d\d?|1\d\d|2[0-4]\d|25[0-4])|(?:[\da-z\u00A1-\uFFFF]+-?)*[\da-z\u00A1-\uFFFF]+(?:\.(?:[\da-z\u00A1-\uFFFF]+-?)*[\da-z\u00A1-\uFFFF]+)*\.[a-z\u00A1-\uFFFF]{2,})|localhost)(?::\d{2,5})?(?:([#/?])\S*)?$/i;function mt(){const n=J(),a=de(),r=g(()=>n.getMenuList);return{menuTree:g(()=>{const u=JSON.parse(JSON.stringify(r.value));u.sort((c,m)=>{var F,d;return(Number((F=c.meta)==null?void 0:F.order)||0)-(Number((d=m.meta)==null?void 0:d.order)||0)});function _(c,m){return c?c.map(d=>{var E,D;if(!a.accessRouter(d))return null;if(((E=d.meta)==null?void 0:E.hideChildrenInMenu)||!d.children)return d.children=[],d;d.children=d.children.filter(s=>{var o;return((o=s.meta)==null?void 0:o.hideInMenu)!==!0});const S=_(d.children,m+1);return S.length>0||m>1?(d.children=S,d):((D=d.meta)==null?void 0:D.hideInMenu)===!1?d:null}).filter(Boolean):null}return _(u,0)})}}function yt(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Se(n)}const Ft=A({__name:"index",setup(n){const a=ue(),r=ce(),i=z(),{menuTree:u}=mt(),_=M([]),c=M([]),m=g({get(){return i.isMobile?!1:i.sidebarCollapsed},set(s){i.updateSettings({sidebarCollapsed:s})}}),F=s=>{i.isMobile||i.updateSettings({sidebarCollapsed:s})},d=s=>{if(gt.test(s.path)){vt(s.path),c.value=[s.name];return}const{hideInMenu:o,activeMenu:f}=s.meta;if(r.name===s.name&&!o&&!f){c.value=[s.name];return}a.push({name:s.name})},S=s=>{const o=[];let f=!1;const t=(p,k,C)=>{var y;if(p.name===C){f=!0,o.push(...k,p.name);return}(y=p.children)!=null&&y.length&&p.children.forEach(T=>{t(T,[...k],C)})};return u.value.forEach(p=>{f||t(p,[p.name],s)}),o};ee(s=>{const{ignoreAuth:o,activeMenu:f,hideInMenu:t}=s.meta;if(!o&&(!t||f)){const p=S(f||s.name),k=new Set([...p,..._.value]);_.value=[...k],c.value=[f||p[p.length-1]]}},!0);const E=()=>{function s(o,f=[]){return o&&o.forEach(t=>{var C;const p=(C=t==null?void 0:t.meta)!=null&&C.icon?()=>{var y;return $e(De(`<${(y=t==null?void 0:t.meta)==null?void 0:y.icon}/>`))}:null,k=(t==null?void 0:t.children)&&(t==null?void 0:t.children.length)!==0?e(Te,{key:t==null?void 0:t.name},{default:()=>[s(t==null?void 0:t.children)],icon:p,title:()=>{var y;return(y=t==null?void 0:t.meta)==null?void 0:y.title}}):e(we,{key:t==null?void 0:t.name,onClick:()=>d(t)},{default:()=>{var y;return[((y=t==null?void 0:t.meta)==null?void 0:y.title)||""]},icon:p});f.push(k)}),f}return s(u.value)},D=()=>{let s;return e(Ee,{collapsed:m.value,"onUpdate:collapsed":o=>m.value=o,"open-keys":_.value,"onUpdate:open-keys":o=>_.value=o,"show-collapse-button":!i.isMobile,"auto-open":!1,"selected-keys":c.value,"auto-open-selected":!0,"level-indent":34,onCollapse:F,style:"height: 100%"},yt(s=E())?s:{default:()=>[s]})};return(s,o)=>(b(),x(D))}});const Y=w(Ft,[["__scopeId","data-v-fca24531"]]);const I=n=>(G("data-v-8897531e"),n=n(),Z(),n),xt={class:"tag-link"},kt=I(()=>v("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1)),Ct=I(()=>v("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),Et=I(()=>v("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),St=I(()=>v("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),$t=I(()=>v("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),Dt=I(()=>v("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),Tt=A({__name:"tab-item",props:{tabData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(n){const a=n,r=ue(),i=ce(),u=q(),_=s=>{r.push({...s})},c=g(()=>u.getTabList),m=g(()=>a.tabData.fullPath!==i.fullPath),F=g(()=>a.index===0),d=g(()=>[0,1].includes(a.index)),S=g(()=>a.index===c.value.length-1),E=(s,o)=>{if(u.deleteTab(s,o),a.tabData.fullPath===i.fullPath){const f=c.value[s-1];r.push({name:f.name})}},D=async s=>{const{tabData:o,index:f}=a,t=[...c.value],p=c.value.findIndex(k=>k.fullPath===i.fullPath);switch(s){case"current":E(f,o);break;case"left":t.splice(1,a.index-1),u.refreshTabList(t),p<f&&r.push({name:o.name});break;case"right":t.splice(a.index+1),u.refreshTabList(t),p>f&&r.push({name:o.name});break;case"others":const k=c.value.filter((C,y)=>y===0||y===a.index);u.refreshTabList(k),r.push({name:o.name});break;case"reload":u.deleteTabCache(o),await r.push({name:pe,params:{path:i.fullPath}}),u.addTabCache(o.name);break;default:u.resetTabList(),r.push({name:_e})}};return(s,o)=>{const f=$("icon-close"),t=$("icon-refresh"),p=oe,k=$("icon-to-left"),C=$("icon-to-right"),y=$("icon-swap"),T=$("icon-folder-delete"),B=se;return b(),x(B,{trigger:"contextMenu","popup-max-height":!1,onSelect:D},{content:l(()=>[e(p,{disabled:h(m),value:"reload"},{default:l(()=>[e(t),kt]),_:1},8,["disabled","value"]),e(p,{class:"sperate-line",disabled:h(F),value:"current"},{default:l(()=>[e(f),Ct]),_:1},8,["disabled","value"]),e(p,{disabled:h(d),value:"left"},{default:l(()=>[e(k),Et]),_:1},8,["disabled","value"]),e(p,{class:"sperate-line",disabled:h(S),value:"right"},{default:l(()=>[e(C),St]),_:1},8,["disabled","value"]),e(p,{value:"others"},{default:l(()=>[e(y),$t]),_:1},8,["value"]),e(p,{value:"all"},{default:l(()=>[e(T),Dt]),_:1},8,["value"])]),default:l(()=>[v("span",{class:Be(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":n.tabData.fullPath===s.$route.fullPath}]),onClick:o[1]||(o[1]=R=>_(n.tabData))},[v("span",xt,H(n.tabData.title),1),v("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:o[0]||(o[0]=Ae(R=>E(n.index,n.tabData),["stop"]))},[e(f)])],2)]),_:1})}}});const wt=w(Tt,[["__scopeId","data-v-8897531e"]]),At=n=>(G("data-v-4be3d5be"),n=n(),Z(),n),Bt={class:"tab-bar-container"},Mt={class:"tab-bar-box"},Lt={class:"tab-bar-scroll"},It={class:"tags-wrap"},Rt=At(()=>v("div",{class:"tag-bar-operation"},null,-1)),Vt=A({__name:"index",setup(n){const a=q(),r=M(),i=50,u=g(()=>a.getTabList);return ee(_=>{u.value.some(c=>c.fullPath===_.fullPath)||a.addTab(_)},!0),Me(()=>{fe()}),(_,c)=>{const m=Le;return b(),L("div",Bt,[e(m,{ref_key:"affixRef",ref:r,"offset-top":i},{default:l(()=>[v("div",Mt,[v("div",Lt,[v("div",It,[(b(!0),L(te,null,ne(h(u),(F,d)=>(b(),x(wt,{key:F.fullPath,index:d,"tab-data":F},null,8,["index","tab-data"]))),128))])]),Rt])]),_:1},512)])}}});const Pt=w(Vt,[["__scopeId","data-v-4be3d5be"]]);const zt={},Nt=U(" Copyright \xA92022 VEnable Admin ");function Ot(n,a){const r=Ie;return b(),x(r,{class:"footer"},{default:l(()=>[Nt]),_:1})}const jt=w(zt,[["render",Ot],["__scopeId","data-v-ac3acfb0"]]),Ut={class:"layout-menu"},Wt=A({__name:"index",setup(n){const a=z(),r=J(),i=q(),u=g(()=>r.menuList),_=Qe(()=>{document.hidden||a.updateSettings({isMobile:Xe()})},100);Ze(window,"resize",_);const c=g(()=>a.sidebarCollapsed?48:a.sidebarWidth),m=g(()=>a.sidebarCollapsed),F=g(()=>a.isMobile),d=C=>{a.updateSettings({sidebarCollapsed:C})},S=M(!0),E=g(()=>a.navbarHeight),D=g(()=>{const C=u.value&&!F.value?{paddingLeft:`${c.value}px`}:{},y=S.value?{paddingTop:`${E.value}px`}:{};return{...C,...y}}),s=g(()=>({height:`${E.value}px`})),o=g(()=>({...S.value?{paddingTop:`${E.value}px`}:{}})),f=M(!1),t=()=>{f.value=!1},p=g(()=>i.getTabCacheList),k=g(()=>a.multiTabs);return Re(()=>{_()}),Ke("toggleDrawerMenu",()=>{f.value=!f.value}),(C,y)=>{const T=je,B=Ue,R=ae,W=$("router-view"),K=We,V=Ve;return b(),x(V,{class:"layout"},{default:l(()=>[e(T,{class:"layout-header",style:O(h(s))},{default:l(()=>[e(bt)]),_:1},8,["style"]),e(V,null,{default:l(()=>[h(u)?Pe((b(),x(B,{key:0,class:"layout-sider",width:h(c),"hide-trigger":!0,collapsed:h(m),collapsible:!0,style:O(h(o)),breakpoint:"xl",onCollapse:d},{default:l(()=>[v("div",Ut,[e(Y)])]),_:1},8,["width","collapsed","style"])),[[ze,!h(F)]]):j("",!0),h(F)?(b(),x(R,{key:1,visible:f.value,placement:"left",footer:!1,header:!1,"mask-closable":"",closable:!1,onCancel:t},{default:l(()=>[e(Y)]),_:1},8,["visible"])):j("",!0),e(V,{class:"layout-content",style:O(h(D))},{default:l(()=>[h(a).multiTabs?(b(),x(Pt,{key:0})):j("",!0),e(K,null,{default:l(()=>[e(W,null,{default:l(({Component:N,route:P})=>[e(Ne,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[P.meta.cache||h(k)?(b(),x(Oe,{key:0,include:h(p)},[(b(),x(Q(N),{key:P.fullPath}))],1032,["include"])):(b(),x(Q(N),{key:P.fullPath}))]),_:2},1024)]),_:1})]),_:1}),e(jt)]),_:1},8,["style"])]),_:1})]),_:1})}}});const Zt=w(Wt,[["__scopeId","data-v-889f9899"]]);export{Zt as default};
