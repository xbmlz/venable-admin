import{a as I,b as R,_ as V,u as X,c as ee,l as te}from"./index.1ece20a9.js";/* empty css               */import{d as $,b0 as ne,b1 as oe,z as p,aC as v,A as z,D as C,aR as W,b2 as se,b3 as ae,aE as t,a as A,c as S,b4 as ue,b5 as U,aD as a,u as y,aS as j,aI as ce,aP as le,b6 as re,b7 as ie,aZ as de,C as N,b8 as O,b9 as _e,aF as D,aV as pe,aY as fe,aK as he,aL as ge,i as ye,ba as be,bb as ve,h as Fe,bc as me,bd as ke,be as Ce,q as Se,bf as xe,bg as we,bh as Ee,bi as De,bj as Be,bk as K,bl as Me,bm as Ae,bn as $e,p as Te}from"./arco.4f9daf89.js";import{g as Ie,h as Ve,i as Le,j as ze,e as Ne,f as Oe,k as Re,l as je}from"./vue.9ce58b76.js";/* empty css               *//* empty css              */function We(){return document.body.getBoundingClientRect().width-1<992}const Ke=$({__name:"form-wrapper",props:{type:{type:String,default:""},name:{type:String,default:""},defaultValue:{type:[String,Boolean,Number],default:""}},emits:["inputChange"],setup(u,{emit:r}){const f=u,c=l=>{r("inputChange",{value:l,key:f.name})};return(l,i)=>{const s=ne,_=oe;return u.type==="number"?(p(),v(s,{key:0,style:{width:"80px"},size:"small","default-value":u.defaultValue,onChange:c},null,8,["default-value"])):(p(),v(_,{key:1,"default-checked":u.defaultValue,size:"small",onChange:c},null,8,["default-checked"]))}}}),Pe={class:"block"},He={class:"title"},Ue=$({__name:"block",props:{title:{type:String,default:""},options:{type:Array,default(){return[]}}},setup(u){const r=I(),f=R(),c=async({key:l,value:i})=>{l==="colorWeakness"&&(document.body.style.filter=i?"invert(80%)":"none"),l==="serverMenu"&&i&&await f.buildRoutes(),r.updateSettings({[l]:i})};return(l,i)=>(p(),z("div",Pe,[C("h5",He,W(u.title),1),(p(!0),z(se,null,ae(u.options,s=>(p(),z("div",{key:s.name,class:"switch-wrapper"},[C("span",null,W(s.name),1),t(Ke,{type:s.type||"switch",name:s.key,"default-value":s.defaultVal,onInputChange:c},null,8,["type","name","default-value"])]))),128))]))}});const P=V(Ue,[["__scopeId","data-v-adb09ea2"]]),Je=j(" \u9875\u9762\u914D\u7F6E "),qe=j(' \u914D\u7F6E\u4E4B\u540E\u4EC5\u662F\u4E34\u65F6\u751F\u6548\uFF0C\u8981\u60F3\u771F\u6B63\u4F5C\u7528\u4E8E\u9879\u76EE\uFF0C\u70B9\u51FB\u4E0B\u65B9\u7684 "\u590D\u5236\u914D\u7F6E" \u6309\u94AE\uFF0C\u5C06\u914D\u7F6E\u66FF\u6362\u5230 settings.json \u4E2D\u5373\u53EF\u3002 '),Ge=$({__name:"index",setup(u,{expose:r}){const f=A(!1),c=I(),{copy:l}=Ie(),i=S(()=>[{name:"\u4F7F\u7528\u670D\u52A1\u7AEF\u83DC\u5355",key:"serverMenu",defaultVal:c.serverMenu},{name:"\u4FA7\u8FB9\u680F\u5BBD\u5EA6",key:"siderWidth",defaultVal:c.siderWidth,type:"number"}]),s=S(()=>[{name:"\u8272\u5F31\u6A21\u5F0F",key:"colorWeakness",defaultVal:c.colorWeakness}]),_=async()=>{const o=JSON.stringify(c.$state,null,2);await l(o),ce.success("\u590D\u5236\u6210\u529F")},m=()=>{f.value=!1};return r({visible:f}),(o,k)=>{const w=ue,F=U;return p(),v(F,{width:350,"unmount-on-close":"",visible:f.value,"cancel-text":"\u5173\u95ED","ok-text":"\u590D\u5236\u914D\u7F6E",onCancel:m,onOk:_},{title:a(()=>[Je]),default:a(()=>[t(P,{options:y(i),title:"\u5185\u5BB9\u533A\u57DF"},null,8,["options"]),t(P,{options:y(s),title:"\u5176\u4ED6\u8BBE\u7F6E"},null,8,["options"]),t(w,null,{default:a(()=>[qe]),_:1})]),_:1},8,["visible"])}}});const Ye=V(Ge,[["__scopeId","data-v-52b7c565"]]),J=u=>(he("data-v-72faf4dc"),u=u(),ge(),u),Ze={class:"navbar"},Qe={class:"navbar-left"},Xe=J(()=>C("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"},null,-1)),et=j(" VEnable "),tt={class:"navbar-right"},nt=["src"],ot=J(()=>C("span",null," \u9000\u51FA\u767B\u5F55 ",-1)),st=$({__name:"index",setup(u){const r=I(),f=X(),c=ye("toggleDrawerMenu"),l=S(()=>r.theme),i=Ve({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(d){r.toggleTheme(d)}}),s=Le(i),_=()=>{s()},{isFullscreen:m,toggle:o}=ze(),k=A(),w=()=>{k.value.visible=!0},F=S(()=>f.avatar),n=()=>{f.logout()};return(d,g)=>{const e=_e,h=D("icon-menu-fold"),x=le,E=D("icon-moon-fill"),b=D("icon-sun-fill"),B=pe,M=re,L=D("icon-fullscreen-exit"),T=D("icon-fullscreen"),q=D("icon-settings"),G=ie,Y=D("icon-export"),Z=fe,Q=de;return p(),z("div",Ze,[C("div",Qe,[t(x,null,{default:a(()=>[Xe,t(e,{style:N({marginTop:"0.8rem",fontSize:"18px"}),heading:5},{default:a(()=>[et]),_:1},8,["style"]),y(r).isMobile?(p(),v(h,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:y(c)},null,8,["onClick"])):O("",!0)]),_:1})]),C("ul",tt,[C("li",null,[t(M,{content:y(l)==="light"?"\u70B9\u51FB\u5207\u6362\u4E3A\u6697\u9ED1\u6A21\u5F0F":"\u70B9\u51FB\u5207\u6362\u4E3A\u660E\u4EAE\u6A21\u5F0F"},{default:a(()=>[t(B,{class:"nav-btn",type:"outline",shape:"circle",onClick:_},{icon:a(()=>[y(l)==="dark"?(p(),v(E,{key:0})):(p(),v(b,{key:1}))]),_:1})]),_:1},8,["content"])]),C("li",null,[t(M,{content:y(m)?"\u70B9\u51FB\u9000\u51FA\u5168\u5C4F\u6A21\u5F0F":"\u70B9\u51FB\u5207\u6362\u5168\u5C4F\u6A21\u5F0F"},{default:a(()=>[t(B,{class:"nav-btn",type:"outline",shape:"circle",onClick:y(o)},{icon:a(()=>[y(m)?(p(),v(L,{key:0})):(p(),v(T,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),C("li",null,[t(M,{content:"\u9875\u9762\u914D\u7F6E"},{default:a(()=>[t(B,{class:"nav-btn",type:"outline",shape:"circle",onClick:w},{icon:a(()=>[t(q)]),_:1})]),_:1})]),C("li",null,[t(Q,{trigger:"click"},{content:a(()=>[t(Z,null,{default:a(()=>[t(x,{onClick:n},{default:a(()=>[t(Y),ot]),_:1})]),_:1})]),default:a(()=>[t(G,{size:28,style:{cursor:"pointer"}},{default:a(()=>[C("img",{alt:"avatar",src:y(F)},null,8,nt)]),_:1})]),_:1})])]),t(Ye,{ref_key:"settingsRef",ref:k},null,512)])}}});const at=V(st,[["__scopeId","data-v-72faf4dc"]]);const ut=(u,r)=>{const{target:f="_blank",...c}=r||{};window.open(u,f,Object.entries(c).reduce((l,i)=>{const[s,_]=i;return[...l,`${s}=${_}`]},[]).join(","))},ct=/^(?!mailto:)(?:http|https|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?:(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}\.(?:\d\d?|1\d\d|2[0-4]\d|25[0-4])|(?:[\da-z\u00A1-\uFFFF]+-?)*[\da-z\u00A1-\uFFFF]+(?:\.(?:[\da-z\u00A1-\uFFFF]+-?)*[\da-z\u00A1-\uFFFF]+)*\.[a-z\u00A1-\uFFFF]{2,})|localhost)(?::\d{2,5})?(?:([#/?])\S*)?$/i;function lt(){const u=R(),r=ee(),f=S(()=>u.getMenuList);return{menuTree:S(()=>{const l=JSON.parse(JSON.stringify(f.value));l.sort((s,_)=>{var m,o;return(Number((m=s.meta)==null?void 0:m.order)||0)-(Number((o=_.meta)==null?void 0:o.order)||0)});function i(s,_){return s?s.map(o=>{var w,F;if(!r.accessRouter(o))return null;if(((w=o.meta)==null?void 0:w.hideChildrenInMenu)||!o.children)return o.children=[],o;o.children=o.children.filter(n=>{var d;return((d=n.meta)==null?void 0:d.hideInMenu)!==!0});const k=i(o.children,_+1);return k.length>0||_>1?(o.children=k,o):((F=o.meta)==null?void 0:F.hideInMenu)===!1?o:null}).filter(Boolean):null}return i(l,0)})}}function rt(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!ve(u)}const it=$({__name:"index",setup(u){const r=Ne(),f=Oe(),c=I(),{menuTree:l}=lt(),i=A([]),s=A([]),_=S({get(){return c.isMobile?!1:c.siderCollapsed},set(n){c.updateSettings({siderCollapsed:n})}}),m=n=>{c.isMobile||c.updateSettings({siderCollapsed:n})},o=n=>{if(ct.test(n.path)){ut(n.path),s.value=[n.name];return}const{hideInMenu:d,activeMenu:g}=n.meta;if(f.name===n.name&&!d&&!g){s.value=[n.name];return}r.push({name:n.name})},k=n=>{const d=[];let g=!1;const e=(h,x,E)=>{var b;if(h.name===E){g=!0,d.push(...x,h.name);return}(b=h.children)!=null&&b.length&&h.children.forEach(B=>{e(B,[...x],E)})};return l.value.forEach(h=>{g||e(h,[h.name],n)}),d};te(n=>{const{ignoreAuth:d,activeMenu:g,hideInMenu:e}=n.meta;if(!d&&(!e||g)){const h=k(g||n.name),x=new Set([...h,...i.value]);i.value=[...x],s.value=[g||h[h.length-1]]}},!0);const w=()=>{function n(d,g=[]){return d&&d.forEach(e=>{var E;const h=(E=e==null?void 0:e.meta)!=null&&E.icon?()=>{var b;return Fe(me(`<${(b=e==null?void 0:e.meta)==null?void 0:b.icon}/>`))}:null,x=(e==null?void 0:e.children)&&(e==null?void 0:e.children.length)!==0?t(ke,{key:e==null?void 0:e.name},{default:()=>[n(e==null?void 0:e.children)],icon:h,title:()=>{var b;return(b=e==null?void 0:e.meta)==null?void 0:b.title}}):t(Ce,{key:e==null?void 0:e.name,onClick:()=>o(e)},{default:()=>{var b;return[((b=e==null?void 0:e.meta)==null?void 0:b.title)||""]},icon:h});g.push(x)}),g}return n(l.value)},F=()=>{let n;return t(be,{collapsed:_.value,"onUpdate:collapsed":d=>_.value=d,"open-keys":i.value,"onUpdate:open-keys":d=>i.value=d,"show-collapse-button":!c.isMobile,"auto-open":!1,"selected-keys":s.value,"auto-open-selected":!0,"level-indent":34,onCollapse:m,style:"height: 100%"},rt(n=w())?n:{default:()=>[n]})};return(n,d)=>(p(),v(F))}});const H=V(it,[["__scopeId","data-v-32c0820a"]]),dt={class:"layout-menu"},_t=$({__name:"index",setup(u){const r=I(),f=R(),c=S(()=>f.menuList),l=je(()=>{document.hidden||r.updateSettings({isMobile:We()})},100);Re(window,"resize",l);const i=S(()=>r.siderCollapsed?48:r.siderWidth),s=S(()=>r.siderCollapsed),_=S(()=>r.isMobile),m=g=>{r.updateSettings({siderCollapsed:g})},o="52px",k=A(!0),w=S(()=>{const g=c.value&&!_.value?{paddingLeft:`${i.value}px`}:{},e=k.value?{paddingTop:o}:{};return{...g,...e}}),F=A(!1),n=()=>{F.value=!1},d=A([]);return Se(()=>{l()}),Te("toggleDrawerMenu",()=>{F.value=!F.value}),(g,e)=>{const h=Me,x=Ae,E=U,b=D("router-view"),B=$e,M=xe;return p(),v(M,{class:"layout"},{default:a(()=>[t(h,{class:"layout-header"},{default:a(()=>[t(at)]),_:1}),t(M,null,{default:a(()=>[y(c)?we((p(),v(x,{key:0,class:"layout-sider",width:y(i),"hide-trigger":!0,collapsed:y(s),collapsible:!0,style:N({paddingTop:k.value?o:""}),breakpoint:"xl",onCollapse:m},{default:a(()=>[C("div",dt,[t(H)])]),_:1},8,["width","collapsed","style"])),[[Ee,!y(_)]]):O("",!0),y(_)?(p(),v(E,{key:1,visible:F.value,placement:"left",footer:!1,header:!1,"mask-closable":"",closable:!1,onCancel:n},{default:a(()=>[t(H)]),_:1},8,["visible"])):O("",!0),t(M,{class:"layout-content",style:N(y(w))},{default:a(()=>[t(B,null,{default:a(()=>[t(b,null,{default:a(({Component:L,route:T})=>[t(De,{name:"fade",mode:"out-in",appear:""},{default:a(()=>[T.meta.cache?(p(),v(Be,{key:0,include:d.value},[(p(),v(K(L),{key:T.fullPath}))],1032,["include"])):(p(),v(K(L),{key:T.fullPath}))]),_:2},1024)]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})}}});const vt=V(_t,[["__scopeId","data-v-2a3028e2"]]);export{vt as default};
