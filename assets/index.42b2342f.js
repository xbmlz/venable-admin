import{a as $,b as L,_ as T,u as Z,l as ee}from"./index.62df43f5.js";/* empty css               */import{d as A,a$ as te,b0 as ne,z as y,aD as C,A as I,D as F,aS as O,b1 as oe,b2 as se,aF as t,a as M,c as S,b3 as ae,b4 as W,aE as l,u as g,aT as N,aI as ue,i as ce,aB as D,b5 as le,b6 as re,C as V,b7 as z,b8 as ie,aQ as de,aP as _e,aY as pe,aW as fe,aK as he,aL as ge,b9 as ye,ba as be,h as ve,bb as Fe,bc as me,bd as ke,q as Ce,p as Se,be as xe,bf as we,bg as Ee,bh as Be,bi as De,bj as Me}from"./arco.fb6e74fb.js";import{f as Ae,g as $e,h as Te,i as Ie,e as Ve,j as ze,k as Le,l as Ne}from"./vue.5deacc15.js";/* empty css               *//* empty css              */function Oe(){return document.body.getBoundingClientRect().width-1<992}const Re=A({__name:"form-wrapper",props:{type:{type:String,default:""},name:{type:String,default:""},defaultValue:{type:[String,Boolean,Number],default:""}},emits:["inputChange"],setup(o,{emit:a}){const _=o,r=i=>{a("inputChange",{value:i,key:_.name})};return(i,d)=>{const u=te,p=ne;return o.type==="number"?(y(),C(u,{key:0,style:{width:"80px"},size:"small","default-value":o.defaultValue,onChange:r},null,8,["default-value"])):(y(),C(p,{key:1,"default-checked":o.defaultValue,size:"small",onChange:r},null,8,["default-checked"]))}}}),je={class:"block"},We={class:"title"},Ke=A({__name:"block",props:{title:{type:String,default:""},options:{type:Array,default(){return[]}}},setup(o){const a=$(),_=L(),r=async({key:i,value:d})=>{i==="colorWeakness"&&(document.body.style.filter=d?"invert(80%)":"none"),i==="serverMenu"&&d&&await _.buildRoutesAction(),a.updateSettings({[i]:d})};return(i,d)=>(y(),I("div",je,[F("h5",We,O(o.title),1),(y(!0),I(oe,null,se(o.options,u=>(y(),I("div",{key:u.name,class:"switch-wrapper"},[F("span",null,O(u.name),1),t(Re,{type:u.type||"switch",name:u.key,"default-value":u.defaultVal,onInputChange:r},null,8,["type","name","default-value"])]))),128))]))}});const R=T(Ke,[["__scopeId","data-v-79a291c2"]]),Ue=N(" \u9875\u9762\u914D\u7F6E "),qe=N(' \u914D\u7F6E\u4E4B\u540E\u4EC5\u662F\u4E34\u65F6\u751F\u6548\uFF0C\u8981\u60F3\u771F\u6B63\u4F5C\u7528\u4E8E\u9879\u76EE\uFF0C\u70B9\u51FB\u4E0B\u65B9\u7684 "\u590D\u5236\u914D\u7F6E" \u6309\u94AE\uFF0C\u5C06\u914D\u7F6E\u66FF\u6362\u5230 settings.json \u4E2D\u5373\u53EF\u3002 '),He=A({__name:"index",setup(o,{expose:a}){const _=M(!1),r=$(),{copy:i}=Ae(),d=S(()=>[{name:"\u4F7F\u7528\u670D\u52A1\u7AEF\u83DC\u5355",key:"serverMenu",defaultVal:r.serverMenu},{name:"\u4FA7\u8FB9\u680F\u5BBD\u5EA6",key:"siderWidth",defaultVal:r.siderWidth,type:"number"}]),u=S(()=>[{name:"\u8272\u5F31\u6A21\u5F0F",key:"colorWeakness",defaultVal:r.colorWeakness}]),p=async()=>{const s=JSON.stringify(r.$state,null,2);await i(s),ue.success("\u590D\u5236\u6210\u529F")},m=()=>{_.value=!1};return a({visible:_}),(s,k)=>{const w=ae,v=W;return y(),C(v,{width:350,"unmount-on-close":"",visible:_.value,"cancel-text":"\u5173\u95ED","ok-text":"\u590D\u5236\u914D\u7F6E",onCancel:m,onOk:p},{title:l(()=>[Ue]),default:l(()=>[t(R,{options:g(d),title:"\u5185\u5BB9\u533A\u57DF"},null,8,["options"]),t(R,{options:g(u),title:"\u5176\u4ED6\u8BBE\u7F6E"},null,8,["options"]),t(w,null,{default:l(()=>[qe]),_:1})]),_:1},8,["visible"])}}});const Je=T(He,[["__scopeId","data-v-52b7c565"]]),K=o=>(he("data-v-fe05a37d"),o=o(),ge(),o),Pe={class:"navbar"},Ge={class:"navbar-left"},Qe=K(()=>F("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"},null,-1)),Ye=N(" VEnable "),Xe={class:"navbar-right"},Ze=["src"],et=K(()=>F("span",null," \u9000\u51FA\u767B\u5F55 ",-1)),tt=A({__name:"index",setup(o){const a=$(),_=Z(),r=ce("toggleDrawerMenu"),i=S(()=>a.theme),d=$e({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(c){a.toggleTheme(c)}}),u=Te(d),p=()=>{u()},{isFullscreen:m,toggle:s}=Ie(),k=M(),w=()=>{k.value.visible=!0},v=S(()=>_.avatar),n=()=>{_.logout()};return(c,b)=>{const e=ie,f=D("icon-menu-fold"),x=de,B=D("icon-search"),h=_e,E=le,U=D("icon-moon-fill"),q=D("icon-sun-fill"),H=D("icon-fullscreen-exit"),J=D("icon-fullscreen"),P=D("icon-settings"),G=re,Q=D("icon-export"),Y=pe,X=fe;return y(),I("div",Pe,[F("div",Ge,[t(x,null,{default:l(()=>[Qe,t(e,{style:V({marginTop:"0.8rem",fontSize:"18px"}),heading:5},{default:l(()=>[Ye]),_:1},8,["style"]),g(a).isMobile?(y(),C(f,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:g(r)},null,8,["onClick"])):z("",!0)]),_:1})]),F("ul",Xe,[F("li",null,[t(E,{content:"\u641C\u7D22"},{default:l(()=>[t(h,{class:"nav-btn",type:"outline",shape:"circle"},{icon:l(()=>[t(B)]),_:1})]),_:1})]),F("li",null,[t(E,{content:g(i)==="light"?"\u70B9\u51FB\u5207\u6362\u4E3A\u6697\u9ED1\u6A21\u5F0F":"\u70B9\u51FB\u5207\u6362\u4E3A\u660E\u4EAE\u6A21\u5F0F"},{default:l(()=>[t(h,{class:"nav-btn",type:"outline",shape:"circle",onClick:p},{icon:l(()=>[g(i)==="dark"?(y(),C(U,{key:0})):(y(),C(q,{key:1}))]),_:1})]),_:1},8,["content"])]),F("li",null,[t(E,{content:g(m)?"\u70B9\u51FB\u9000\u51FA\u5168\u5C4F\u6A21\u5F0F":"\u70B9\u51FB\u5207\u6362\u5168\u5C4F\u6A21\u5F0F"},{default:l(()=>[t(h,{class:"nav-btn",type:"outline",shape:"circle",onClick:g(s)},{icon:l(()=>[g(m)?(y(),C(H,{key:0})):(y(),C(J,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),F("li",null,[t(E,{content:"\u9875\u9762\u914D\u7F6E"},{default:l(()=>[t(h,{class:"nav-btn",type:"outline",shape:"circle",onClick:w},{icon:l(()=>[t(P)]),_:1})]),_:1})]),F("li",null,[t(X,{trigger:"click"},{content:l(()=>[t(Y,null,{default:l(()=>[t(x,{onClick:n},{default:l(()=>[t(Q),et]),_:1})]),_:1})]),default:l(()=>[t(G,{size:28,style:{cursor:"pointer"}},{default:l(()=>[F("img",{alt:"avatar",src:g(v)},null,8,Ze)]),_:1})]),_:1})])]),t(Je,{ref_key:"settingsRef",ref:k},null,512)])}}});const nt=T(tt,[["__scopeId","data-v-fe05a37d"]]);const ot=(o,a)=>{const{target:_="_blank",...r}=a||{};window.open(o,_,Object.entries(r).reduce((i,d)=>{const[u,p]=d;return[...i,`${u}=${p}`]},[]).join(","))},st=/^(?!mailto:)(?:http|https|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?:(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}\.(?:\d\d?|1\d\d|2[0-4]\d|25[0-4])|(?:[\da-z\u00A1-\uFFFF]+-?)*[\da-z\u00A1-\uFFFF]+(?:\.(?:[\da-z\u00A1-\uFFFF]+-?)*[\da-z\u00A1-\uFFFF]+)*\.[a-z\u00A1-\uFFFF]{2,})|localhost)(?::\d{2,5})?(?:([#/?])\S*)?$/i;function at(){return{accessRouter(o){var a,_;return!((a=o.meta)!=null&&a.requiresAuth)||!((_=o.meta)!=null&&_.roles)}}}function ut(){const o=L(),a=at(),_=S(()=>o.getMenuList);return{menuTree:S(()=>{const i=JSON.parse(JSON.stringify(_.value));i.sort((u,p)=>{var m,s;return(Number((m=u.meta)==null?void 0:m.order)||0)-(Number((s=p.meta)==null?void 0:s.order)||0)});function d(u,p){return u?u.map(s=>{var w,v;if(!a.accessRouter(s))return null;if(((w=s.meta)==null?void 0:w.hideChildrenInMenu)||!s.children)return s.children=[],s;s.children=s.children.filter(n=>{var c;return((c=n.meta)==null?void 0:c.hideInMenu)!==!0});const k=d(s.children,p+1);return k.length>0||p>1?(s.children=k,s):((v=s.meta)==null?void 0:v.hideInMenu)===!1?s:null}).filter(Boolean):null}return d(i,0)})}}function ct(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!be(o)}const lt=A({__name:"index",setup(o){const a=Ve(),_=ze(),r=$(),{menuTree:i}=ut(),d=M([]),u=M([]),p=S({get(){return r.isMobile?!1:r.siderCollapsed},set(n){r.updateSettings({siderCollapsed:n})}}),m=n=>{r.isMobile||r.updateSettings({siderCollapsed:n})},s=n=>{if(st.test(n.path)){ot(n.path),u.value=[n.name];return}const{hideInMenu:c,activeMenu:b}=n.meta;if(_.name===n.name&&!c&&!b){u.value=[n.name];return}a.push({name:n.name})},k=n=>{const c=[];let b=!1;const e=(f,x,B)=>{var h;if(f.name===B){b=!0,c.push(...x,f.name);return}(h=f.children)!=null&&h.length&&f.children.forEach(E=>{e(E,[...x],B)})};return i.value.forEach(f=>{b||e(f,[f.name],n)}),c};ee(n=>{const{requiresAuth:c,activeMenu:b,hideInMenu:e}=n.meta;if(c&&(!e||b)){const f=k(b||n.name),x=new Set([...f,...d.value]);d.value=[...x],u.value=[b||f[f.length-1]]}},!0);const w=()=>{function n(c,b=[]){return c&&c.forEach(e=>{var B;const f=(B=e==null?void 0:e.meta)!=null&&B.icon?()=>{var h;return ve(Fe(`<${(h=e==null?void 0:e.meta)==null?void 0:h.icon}/>`))}:null,x=(e==null?void 0:e.children)&&(e==null?void 0:e.children.length)!==0?t(me,{key:e==null?void 0:e.name},{default:()=>[n(e==null?void 0:e.children)],icon:f,title:()=>{var h;return(h=e==null?void 0:e.meta)==null?void 0:h.title}}):t(ke,{key:e==null?void 0:e.name,onClick:()=>s(e)},{default:()=>{var h;return[((h=e==null?void 0:e.meta)==null?void 0:h.title)||""]},icon:f});b.push(x)}),b}return n(i.value)},v=()=>{let n;return t(ye,{collapsed:p.value,"onUpdate:collapsed":c=>p.value=c,"open-keys":d.value,"onUpdate:open-keys":c=>d.value=c,"show-collapse-button":!r.isMobile,"auto-open":!1,"selected-keys":u.value,"auto-open-selected":!0,"level-indent":34,onCollapse:m,style:"height: 100%"},ct(n=w())?n:{default:()=>[n]})};return(n,c)=>(y(),C(v))}});const j=T(lt,[["__scopeId","data-v-b8226a24"]]),rt={class:"layout-menu"},it=A({__name:"index",setup(o){const a=$(),_=L(),r=S(()=>_.menuList),i=Ne(()=>{document.hidden||a.updateSettings({isMobile:Oe()})},100);Le(window,"resize",i);const d=S(()=>a.siderCollapsed?48:a.siderWidth),u=S(()=>a.siderCollapsed),p=S(()=>a.isMobile),m=c=>{a.updateSettings({siderCollapsed:c})},s="52px",k=M(!0),w=S(()=>{const c=r.value&&!p.value?{paddingLeft:`${d.value}px`}:{},b=k.value?{paddingTop:s}:{};return{...c,...b}}),v=M(!1),n=()=>{v.value=!1};return Ce(()=>{i()}),Se("toggleDrawerMenu",()=>{v.value=!v.value}),(c,b)=>{const e=Be,f=De,x=W,B=D("router-view"),h=Me,E=xe;return y(),C(E,{class:"layout"},{default:l(()=>[t(e,{class:"layout-navbar"},{default:l(()=>[t(nt)]),_:1}),t(E,null,{default:l(()=>[g(r)?we((y(),C(f,{key:0,class:"layout-sider",width:g(d),"hide-trigger":!0,collapsed:g(u),collapsible:!0,style:V({paddingTop:k.value?s:""}),breakpoint:"xl",onCollapse:m},{default:l(()=>[F("div",rt,[t(j)])]),_:1},8,["width","collapsed","style"])),[[Ee,!g(p)]]):z("",!0),g(p)?(y(),C(x,{key:1,visible:v.value,placement:"left",footer:!1,header:!1,"mask-closable":"",closable:!1,onCancel:n},{default:l(()=>[t(j)]),_:1},8,["visible"])):z("",!0),t(E,{class:"layout-content",style:V(g(w))},{default:l(()=>[t(h,null,{default:l(()=>[t(B)]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})}}});const yt=T(it,[["__scopeId","data-v-0f419b52"]]);export{yt as default};
